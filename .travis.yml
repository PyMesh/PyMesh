language: cpp
sudo: false
virtualenv:
  system_site_packages: true
matrix:
    include:
        - os: osx
        compiler: clang
        install:
            - brew update
            - brew upgrade cmake
            - git submodule update --init --recursive
            - mkdir third_party/build
            - cd third_party/build
            - cmake ..
            - make
            - make install
        script:
            - mkdir -p build
            - cd build
            - cmake ..
            - make
            - make tools
        after_success:
            - cd build
            - make all_tests
            - python -c "import pymesh; pymesh.test()"
